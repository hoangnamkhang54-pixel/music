<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music & Video Downloader</title>
    <style>
        :root { --primary: #1db954; --video: #e91e63; --dark: #121212; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: white; margin: 0; overflow-x: hidden; }
        
        /* Thanh tÃ¬m kiáº¿m cá»‘ Ä‘á»‹nh */
        .header { position: sticky; top: 0; background: #181818; padding: 20px; z-index: 1000; text-align: center; border-bottom: 2px solid #333; }
        .search-box { display: flex; max-width: 600px; margin: auto; gap: 10px; background: #282828; padding: 5px 15px; border-radius: 30px; }
        input { flex: 1; background: transparent; border: none; color: white; padding: 10px; outline: none; }
        button { background: var(--primary); border: none; padding: 10px 25px; border-radius: 20px; font-weight: bold; cursor: pointer; }

        /* Chia Ä‘Ã´i mÃ n hÃ¬nh */
        .main-content { display: flex; width: 100%; min-height: 80vh; }
        .column { flex: 1; padding: 20px; border-right: 1px solid #333; }
        .column:last-child { border-right: none; }
        .column-title { text-align: center; font-size: 1.5rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid; }
        .mp3-title { color: var(--primary); border-color: var(--primary); }
        .mp4-title { color: var(--video); border-color: var(--video); }

        /* Item káº¿t quáº£ */
        .card { display: flex; align-items: center; background: #1db95412; margin-bottom: 15px; padding: 10px; border-radius: 8px; gap: 10px; border: 1px solid #282828; }
        .card img { width: 50px; height: 50px; border-radius: 5px; object-fit: cover; }
        .card-info { flex: 1; font-size: 14px; }
        .card-info b { display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 150px; }
        
        .btn { font-size: 11px; color: white; text-decoration: none; padding: 6px 12px; border-radius: 4px; text-align: center; font-weight: bold; }
        .btn-mp3 { background: var(--primary); }
        .btn-mp4 { background: var(--video); }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .main-content { flex-direction: column; }
            .column { border-right: none; border-bottom: 1px solid #333; }
        }
    </style>
</head>
<body>

<div class="header">
    <div class="search-box">
        <input type="text" id="query" placeholder="TÃ¬m kiáº¿m bÃ i hÃ¡t hoáº·c video...">
        <button onclick="masterSearch()">TÃŒM KIáº¾M</button>
    </div>
</div>

<div class="main-content">
    <div class="column" id="mp3-col">
        <div class="column-title mp3-title">ðŸŽ§ NGHE & Táº¢I MP3</div>
        <div id="mp3-results"></div>
    </div>

    <div class="column" id="mp4-col">
        <div class="column-title mp4-title">ðŸŽ¬ Táº¢I VIDEO MP4</div>
        <div id="mp4-results"></div>
    </div>
</div>

<script>
    // API Key cá»§a báº¡n
    const k = ["AIzaSyCXN0nU", "Fr76ntM2kyOH", "ZGSHyccvpHN0nR0"];
    const KEY = k.join("");

    async function masterSearch() {
        const q = document.getElementById('query').value;
        const mp3Res = document.getElementById('mp3-results');
        const mp4Res = document.getElementById('mp4-results');
        
        if(!q) return;
        mp3Res.innerHTML = mp4Res.innerHTML = "Äang tÃ¬m...";

        try {
            // Láº¥y dá»¯ liá»‡u tá»« JioSaavn (MP3 cháº¥t lÆ°á»£ng cao) vÃ  YouTube
            const [saavn, yt] = await Promise.allSettled([
                fetch(`https://saavn.me/search/songs?query=${q}`).then(r => r.json()),
                fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=10&q=${q}&type=video&key=${KEY}`).then(r => r.json())
            ]);

            mp3Res.innerHTML = "";
            mp4Res.innerHTML = "";

            // Xá»­ lÃ½ nguá»“n MP3 (Saavn + YouTube Converter)
            if(saavn.status === 'fulfilled' && saavn.value.data?.results) {
                saavn.value.data.results.forEach(s => {
                    renderItem(mp3Res, s.name, s.image[1].link, s.downloadUrl[4].link, 'btn-mp3', 'Táº£i MP3');
                });
            }

            // Xá»­ lÃ½ nguá»“n MP4 (YouTube)
            if(yt.status === 'fulfilled' && yt.value.items) {
                yt.value.items.forEach(v => {
                    const id = v.id.videoId;
                    const title = v.snippet.title;
                    const thumb = v.snippet.thumbnails.default.url;
                    
                    // Link táº£i MP3 tá»« YouTube (cá»™t trÃ¡i)
                    renderItem(mp3Res, title, thumb, `https://api.vevioz.com/@api/button/mp3/${id}`, 'btn-mp3', 'Táº£i MP3');
                    
                    // Link táº£i MP4 tá»« YouTube (cá»™t pháº£i)
                    renderItem(mp4Res, title, thumb, `https://api.vevioz.com/@api/button/videos/${id}`, 'btn-mp4', 'Táº£i MP4');
                });
            }

        } catch (e) {
            alert("Lá»—i káº¿t ná»‘i API!");
        }
    }

    function renderItem(target, title, img, link, btnClass, btnText) {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `
            <img src="${img}">
            <div class="card-info">
                <b>${title}</b>
            </div>
            <a href="${link}" target="_blank" class="btn ${btnClass}">${btnText}</a>
        `;
        target.appendChild(div);
    }
</script>

</body>
</html>
