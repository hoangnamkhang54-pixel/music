<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khang Music Mobile - .COM</title>
    <style>
        :root { --primary: #00d2ff; --dark: #0a0a0a; }
        body { margin: 0; padding: 0; background: var(--dark); color: white; font-family: -apple-system, sans-serif; overflow-x: hidden; }
        
        /* Hi·ªáu ·ª©ng n·ªÅn v≈© tr·ª• nh·∫π cho Mobile */
        .space-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%); }

        .container { max-width: 600px; margin: auto; padding: 15px; }
        .logo { text-align: center; font-weight: 900; font-size: 22px; color: var(--primary); margin: 15px 0; text-shadow: 0 0 10px var(--primary); }

        /* PLAYER TR√äN MOBILE */
        #main-player {
            display: none; background: rgba(255,255,255,0.1); backdrop-filter: blur(15px);
            border-radius: 20px; border: 1px solid var(--primary); padding: 20px; margin-bottom: 20px;
        }
        .player-content { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 15px; }
        #p-img { width: 180px; height: 180px; border-radius: 15px; object-fit: cover; box-shadow: 0 0 20px var(--primary); }
        
        .lyrics-box {
            width: 100%; height: 120px; overflow-y: auto; background: rgba(0,0,0,0.3);
            border-radius: 10px; font-size: 14px; padding: 10px; margin-top: 10px; color: #ccc;
            line-height: 1.5; border: 1px solid rgba(255,255,255,0.1);
        }

        /* √î T√åM KI·∫æM */
        .search-box { display: flex; gap: 8px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px 18px; border-radius: 25px; border: 1px solid var(--primary); background: transparent; color: white; outline: none; font-size: 16px; }
        button { background: var(--primary); border: none; padding: 0 20px; border-radius: 25px; font-weight: bold; cursor: pointer; color: #000; }

        /* DANH S√ÅCH B√ÄI H√ÅT */
        .song-item {
            display: flex; align-items: center; gap: 12px; background: rgba(255,255,255,0.05);
            padding: 10px; border-radius: 12px; margin-bottom: 10px; cursor: pointer;
            transition: 0.2s; border: 1px solid transparent;
        }
        .song-item:active { background: rgba(0,210,255,0.2); transform: scale(0.98); }
        .song-item img { width: 50px; height: 50px; border-radius: 8px; }
        .song-info { flex: 1; overflow: hidden; }
        .song-info b { display: block; font-size: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .song-info span { font-size: 12px; color: #888; }
    </style>
</head>
<body>

<div class="space-bg"></div>

<div class="container">
    <div class="logo">KHANG-MUSIC.COM</div>

    <div id="main-player">
        <div class="player-content">
            <img id="p-img" src="">
            <div style="width:100%">
                <h3 id="p-title" style="margin:0; font-size: 18px;"></h3>
                <div id="p-artist" style="color:var(--primary); font-size: 14px;"></div>
                <audio id="audio" controls style="width:100%; margin-top:10px; height: 35px;"></audio>
                <div class="lyrics-box" id="lyrics-txt">L·ªùi b√†i h√°t...</div>
            </div>
        </div>
    </div>

    <div class="search-box">
        <input type="text" id="inp" placeholder="T√¨m t√™n b√†i h√°t ho·∫∑c ca sƒ©...">
        <button onclick="search()">T√åM</button>
    </div>

    <div id="list"></div>
</div>

<script>
    const audio = document.getElementById('audio');

    async function search() {
        const q = document.getElementById('inp').value;
        if(!q) return;
        
        const listDiv = document.getElementById('list');
        listDiv.innerHTML = "<p style='text-align:center'>üöÄ ƒêang t√¨m nh·∫°c Vi·ªát...</p>";

        try {
            // S·ª≠ d·ª•ng API Saavn (v·ªën r·∫•t m·∫°nh v·ªÅ nh·∫°c Vi·ªát v√† c√≥ ·∫£nh ƒë·∫πp)
            const res = await fetch(`https://saavn.me/search/songs?query=${q}`).then(r => r.json());
            listDiv.innerHTML = "";

            if(res.data.results.length === 0) {
                listDiv.innerHTML = "<p>Kh√¥ng t√¨m th·∫•y b√†i n√†y.</p>";
                return;
            }

            res.data.results.forEach(song => {
                const div = document.createElement('div');
                div.className = 'song-item';
                // L·∫•y ·∫£nh ch·∫•t l∆∞·ª£ng cao nh·∫•t
                const img = song.image[2].link;
                const downloadLink = song.downloadUrl[4].link;

                div.onclick = () => play(song.name, song.primaryArtists, img, downloadLink);
                div.innerHTML = `
                    <img src="${song.image[1].link}">
                    <div class="song-info">
                        <b>${song.name}</b>
                        <span>${song.primaryArtists}</span>
                    </div>
                `;
                listDiv.appendChild(div);
            });
        } catch (e) { listDiv.innerHTML = "<p>L·ªói k·∫øt n·ªëi tr·∫°m kh√¥ng gian.</p>"; }
    }

    async function play(name, artist, img, link) {
        const player = document.getElementById('main-player');
        player.style.display = 'block';
        document.getElementById('p-title').innerText = name;
        document.getElementById('p-artist').innerText = artist;
        document.getElementById('p-img').src = img;
        
        // Fix l·ªói ch·∫°y tr√™n ƒëi·ªán tho·∫°i (ƒë·∫£m b·∫£o link https)
        audio.src = link.replace('http:', 'https:');
        audio.play().catch(() => {
            alert("Vui l√≤ng nh·∫•n n√∫t Play tr√™n tr√¨nh ph√°t ƒë·ªÉ nghe!");
        });

        window.scrollTo({ top: 0, behavior: 'smooth' });n

        // T√¨m l·ªùi
        const lBox = document.getElementById('lyrics-txt');
        lBox.innerText = "‚è≥ ƒêang l·∫•y l·ªùi...";
        try {
            const res = await fetch(`https://api.lyrics.ovh/v1/${artist}/${name}`).then(r => r.json());
            lBox.innerText = res.lyrics || "üöÄ Giai ƒëi·ªáu ƒëang bay b·ªïng (Kh√¥ng c√≥ l·ªùi).";
        } catch { lBox.innerText = "Ch∆∞a c√≥ l·ªùi cho b√†i n√†y."; }
    }
</script>
</body>
</html>
